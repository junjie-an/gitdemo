关于国家算力文件草案的总结

一：监控层四大核心功能

**1.基础设施监控**：监控构成算力网络的物理硬件资源和基础虚拟化资源的运行状态，如GPU、CPU、内存、硬盘等资源使用情况。

**2云平台监控**：监控在基础设施之上构建的云服务的运行状态、性能和计量信息。确保出厂的产品（算力服务）是合格的。

3动环监控：监控为算力基础设置提供支撑的动力和环境系统。如机房温度、电压等。

**4业务监控：**监控用户租用算力上的应用或程序。如为什么CPU占用率95%。

二：两种集群的管理

1.以slurm为代表的传统HPC集群：处理"任务型"算力需求。

2.以kubenetes为代表的云原生集群：处理"服务型"算力需求。

PKUSCOW---主要对于slurm集群的监控

一：技术栈（基础设施监控）

1.  数据的暴露：Node Exporter

    a.  负责暴露每个服务器当中的资源指标，如：CPU、内存、磁盘、网络等。

2数据采集与存储：Prometheus

a.  负责拉取和存储从算力集群中Node
    Exporter裸露出来的指标，如CPU、GPU、内存、作业状态等

3可视化与仪表盘：Grafana

b.  负责将Prometheus中的监控数据以丰富的图标形式进行展示。

c.  SCOW通过iframe嵌入或代理的方式，将Grafana面板集成到管理界面。

4告警管理：Alertmanager

d.  负责接受来自Prometheus的告诫警信息，并进行去重、分组和路由，最终在SCOW的"告警日志"中展示。

二：整体架构梳理

1.  数据流：

> Node Exporter（暴露资源指标） → Prometheus(采集/存储) →
> Grafana(可视化) → SCOW(界面集成)

2.  告警流：

> Prometheus(规则判断) → Alertmanager(告警管理) → SCOW(告警日志展示)

三：SCOW的集成方式

1.  前端嵌入：

    a.  使用iframe直接嵌入Grafana面板。

2.  代理模式：

    a.  通过SCOW后端代理访问Grafana（增强安全性）

3.  配置驱动：

    a.  通过mis.yml配置文件控制监控功能开关。

四：调研结论

OpenSCOW的监测层并非自研，而是选择并集成了成熟的"P+G+A"技术生态，这保证了其监控能力的专业性、稳定性和可扩展性。Openscow并非通过单一的监控方式，而是通过一个混合架构来全面掌握slurm集群的状况。1.通过slurm适配器：获得了集群的逻辑资源图（作业，队列，节点分配状态）。2.通过Prometheus他获得了底层基础服务器的物理监控视图（服务器真实的CPU，GPU和内存资源等）。

OpenFuYao

一：技术栈（主要是对云原生集群的管理）

1.  硬件层：kube-prometheus-stack

    a.  Node Exporter：暴露服务器硬件指标

    b.  Prometheus：收集指标

    c.  Grafana：可视化

    d.  Alertmanager：告警管理

    e.  Kub-state-metrics：暴露云平台服务信息

二：集成方式：

链接跳转到独立 Grafana，只需要一个链接即可，开发简单。

三：数据流（服务层）

![](media/image1.png){width="6.59375in" height="1.5625in"}

四：调研结论

FuYao
的基础设施监控是一个**成熟、标准化的云原生监控方案**，kube-prometheus-stack Helm
Chart 一键部署，适合需要专业运维监控和自动化管理的 Kubernetes
环境。主要是对于kub集群这种类型的管理平台。

初步总结

如果我们开发的是对于云原生集群例如kubenetes的管理平台，在监控层我们只需在每个集群当中安装kube-prometheus-stack一体化包，能获取对集群基础设施监控、云平台监控、业务监控所需要的信息。

对于传统HPC集群的管理，想要获取监控信息可以借鉴openscow的方法：1.通过slurm适配器：获得了集群的逻辑资源图（作业，队列，节点分配状态）。2.通过Prometheus他获得了底层基础服务器的物理监控视图（服务器真实的CPU，GPU和内存资源等）。
